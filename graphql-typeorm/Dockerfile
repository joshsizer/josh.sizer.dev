FROM node

ARG APP_ENV
ARG APP_ENV_DEVELOPMENT
ARG APP_ENV_PRODUCTION

ENV APP_ENV=$APP_ENV
ENV APP_ENV_DEVELOPMENT=$APP_ENV_DEVELOPMENT
ENV APP_ENV_PRODUCTION=$APP_ENV_PRODUCTION

EXPOSE 4000

WORKDIR /graphql-typeorm

COPY ./ ./

RUN chmod u+x install.sh && \
    chmod u+x entrypoint.sh

RUN ./install.sh

ENTRYPOINT [ "./entrypoint.sh" ] 
